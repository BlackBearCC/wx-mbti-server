# å¾®ä¿¡å°ç¨‹åºAIèŠå¤©å®¤åç«¯æœåŠ¡

åŸºäºFastAPIçš„é«˜æ€§èƒ½AIèŠå¤©å®¤åç«¯æœåŠ¡ï¼Œæ”¯æŒå¤šç»´åº¦MBTIè§’è‰²ç”Ÿæ€ç³»ç»Ÿã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**: FastAPI 0.104+
- **æ•°æ®åº“**: PostgreSQL 15+ (ä¸»åº“) + Redis 7+ (ç¼“å­˜)
- **WebSocket**: FastAPI WebSocket + Redis Pub/Sub
- **è®¤è¯**: JWT + å¾®ä¿¡å°ç¨‹åºè®¤è¯
- **å®¹å™¨åŒ–**: Docker + Docker Compose

### æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¾®ä¿¡å°ç¨‹åº      â”‚    â”‚   FastAPI       â”‚
â”‚                â”‚ -> â”‚   APIæœåŠ¡        â”‚
â”‚   WebSocket     â”‚    â”‚   WebSocket     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚             â”‚             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   PostgreSQL     â”‚    â”‚     Redis        â”‚
      â”‚   ç”¨æˆ·/è§’è‰²/æ¶ˆæ¯   â”‚    â”‚   ç¼“å­˜/ä¼šè¯       â”‚
      â”‚   æŠ€èƒ½/è®¢å•æ•°æ®    â”‚    â”‚   Pub/Sub       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
wx-mbti-server/
â”œâ”€â”€ app/                        # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ settings.py         # åº”ç”¨é…ç½®
â”‚   â”‚   â””â”€â”€ database.py         # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ deps.py             # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”œâ”€â”€ auth.py             # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ users.py            # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ characters.py       # è§’è‰²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ rooms.py            # èŠå¤©å®¤ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ skills.py           # æŠ€èƒ½ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ payment.py          # æ”¯ä»˜ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ websocket.py        # WebSocketå¤„ç†
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ security.py         # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ redis_client.py     # Rediså®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ websocket_manager.py # WebSocketç®¡ç†å™¨
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ character.py
â”‚   â”‚   â”œâ”€â”€ room.py
â”‚   â”‚   â”œâ”€â”€ message.py
â”‚   â”‚   â”œâ”€â”€ skill.py
â”‚   â”‚   â””â”€â”€ order.py
â”‚   â”œâ”€â”€ schemas/                # Pydanticæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ character.py
â”‚   â”‚   â”œâ”€â”€ room.py
â”‚   â”‚   â”œâ”€â”€ message.py
â”‚   â”‚   â”œâ”€â”€ skill.py
â”‚   â”‚   â””â”€â”€ websocket.py
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth_service.py
â”‚   â”‚   â”œâ”€â”€ character_service.py
â”‚   â”‚   â”œâ”€â”€ skill_service.py
â”‚   â”‚   â”œâ”€â”€ room_service.py
â”‚   â”‚   â”œâ”€â”€ message_service.py
â”‚   â”‚   â”œâ”€â”€ payment_service.py
â”‚   â”‚   â””â”€â”€ ai_service.py
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ validators.py
â”‚       â”œâ”€â”€ decorators.py
â”‚       â””â”€â”€ exceptions.py
â”œâ”€â”€ migrations/                 # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç 
â”œâ”€â”€ scripts/                    # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ docker/                     # Dockeré…ç½®
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ docker-compose.yml          # å®¹å™¨ç¼–æ’
â”œâ”€â”€ Dockerfile                  # é•œåƒæ„å»º
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ alembic.ini                # æ•°æ®åº“è¿ç§»é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd wx-mbti-server
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

3. **ä½¿ç”¨Docker Composeå¯åŠ¨æœåŠ¡**
```bash
docker-compose up -d
```

4. **è¿è¡Œæ•°æ®åº“è¿ç§»**
```bash
docker-compose exec app alembic upgrade head
```

5. **è®¿é—®æœåŠ¡**
- APIæ–‡æ¡£: http://localhost:8000/docs
- åº”ç”¨æœåŠ¡: http://localhost:8000

## ğŸ”§ å¼€å‘æŒ‡å—

### APIå¼€å‘
- éµå¾ªRESTfulè®¾è®¡åŸåˆ™
- ä½¿ç”¨Pydanticè¿›è¡Œæ•°æ®éªŒè¯
- å®ç°å®Œæ•´çš„é”™è¯¯å¤„ç†
- æ·»åŠ APIæ–‡æ¡£å’Œæµ‹è¯•

### æ•°æ®åº“æ“ä½œ
- ä½¿ç”¨SQLAlchemy ORM
- é€šè¿‡Alembicç®¡ç†æ•°æ®åº“è¿ç§»
- å®ç°æ•°æ®åº“è¿æ¥æ± 

### WebSocketé€šä¿¡
- åŸºäºFastAPI WebSocket
- Redis Pub/Subå®ç°å¤šå®ä¾‹æ¶ˆæ¯å¹¿æ’­
- å¿ƒè·³æ£€æµ‹å’Œè‡ªåŠ¨é‡è¿

### æµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app tests/
```

## ğŸ” å®‰å…¨è€ƒè™‘

- JWT tokenè®¤è¯
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- SQLæ³¨å…¥é˜²æŠ¤
- XSSé˜²æŠ¤
- CORSé…ç½®
- æ•æ„Ÿä¿¡æ¯åŠ å¯†

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- Redisç¼“å­˜ç­–ç•¥
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- WebSocketè¿æ¥æ± ç®¡ç†
- å¼‚æ­¥ä»»åŠ¡å¤„ç†

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç å¹¶æµ‹è¯•
4. åˆ›å»ºPull Request

## ğŸ“„ License

MIT License